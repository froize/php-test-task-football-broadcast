# Тестовое задание для junior php разработчика

# Результат

1. Шарипов Али Эльварович
2. 2,5 часа
3. Адрес скриншота: `screen/screen.jpg`
4. This
5. Описание принятых решений:

* *"Feature: Добавить таблицу с общим временем, проведенным на поле, для каждой позиции (нападающие, защитники и т.д.), а не только для каждого игрока"*

Добавлено новое свойство position для класса Player. При добавлении нового объекта в параметрах вставляется его позиция.
По каждой позиции происходит проход по циклу игроков в команде, суммируется их время на поле

* *"Bug: Исправить ошибку с подсчетом времени, проведенном на поле"*

Функция подсчета времени использует события startPeriod для начального значения и finishPeriod. Первое значение - 1, второе - 96.
Соответственно при задании начального значения в методе goToPlay() передается значение 0.

* Improvement: Добавить иконку мячика, если футболист забил гол

Добавлено новое свойство goals для класса Player. При парсинге события с этим типом значение увеличивается.
Соответственно в шаблоне в цикле выводится картинка гола.

* Improvement: Добавить отображение желтых и красных карточек напротив футболистов, которые получили карточки

Добавлено новое свойство yellowCards для класса Player. При парсинге события с этим типом значение увеличивается.
Соответственно в шаблоне в цикле выводится картинка карточки.

## Описание
### Легенда
У нас есть популярный (высоконагруженный) сайт с текстовыми трансляциями футбольных матчей.
Мы сотрудничаем с посредником, который предоставляет логи матчей. Каждый лог состоит из списка событий разного типа в json формате. 
Команда, в которой вы работаете, создала первую версию модуля для генерации статичных html страниц с текстовыми трансляциями матчей на основе данных из логов.

### Первые отзывы
* Пользователи жалуются, что неудобно отслеживать, кто забил голы и получил карточки. Для этого приходится листать весь лог матча
* Пользователи хотят получить статистику по общему количеству времени для каждой позиции (нападающие, защитники и т.д.)

### Результаты тестирования
Отдел тестирования выявил следующий баг:
* Неверно показано время, проведенное на поле. Например, матч 1024102 длился 96 минут, а максимальное время у футболистов, проведенное на поле – 95 минут. За 1 матч невозможно заменить всю команду. Значит общее время, проведенное на поле, считается неверно
 
### Технические задачи
* Improvement: Добавить иконку мячика, если футболист забил гол
* Improvement: Добавить отображение желтых и красных карточек напротив футболистов, которые получили карточки
* Feature: Добавить таблицу с общим временем, проведенным на поле, для каждой позиции (нападающие, защитники и т.д.), а не только для каждого игрока
* Bug: Исправить ошибку с подсчетом времени, проведенном на поле

## Установка и использование
Стек технологий:
* Генератор написан на php 7.4
* Для управления зависимостями используется Composer (https://getcomposer.org/)
* Для запуска генерации через CLI команду используется symfony/console (https://symfony.com/doc/current/components/console.html)
* Для генерации html файлов по шаблону используется twig (https://twig.symfony.com/)
* Для dev окружения используется Docker (https://www.docker.com/) и Docker Compose (https://docs.docker.com/compose/)

Существует 2 способа использовать компонент: локально или через Docker (**предпочтительнее**).
### Локальный способ (в Composer)
```bash
php composer.phar install # Установка зависимостей
php bin/console app:build-match-page # Генерация страницы мачта. Можно сразу указать id конкретного матча "bin/console app:build-match-page 1024102"
``` 

### Запуск через Docker (**предпочтительнее**)
```bash
docker-compose up -d # Запуск контейнеров в фоновом режиме
docker-compose exec php ./composer.phar install # Установка зависимостей
docker-compose exec php bin/console app:build-match-page # Генерация страницы мачта. Можно сразу указать id конкретного матча "docker-compose exec php bin/console app:build-match-page 1024102"
```
**Необходимо** установить Docker (https://docs.docker.com/install/) и Docker Compose (https://docs.docker.com/compose/install/)

